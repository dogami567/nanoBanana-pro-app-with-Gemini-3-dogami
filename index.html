<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nano Banana - GeminiåŒå›¾åˆæˆå·¥å…·</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-wrapper">
        <!-- å†å²è®°å½•ä¾§è¾¹æ  -->
        <aside class="history-sidebar" id="historySidebar">
            <div class="sidebar-header">
                <h3>ğŸ“œ ç”Ÿæˆå†å²</h3>
                <button class="sidebar-toggle" id="sidebarToggle" onclick="toggleSidebar()">âœ•</button>
            </div>
            
            <div class="history-controls">
                <button class="control-btn" onclick="clearAllHistory()" id="clearHistoryBtn">
                    ğŸ—‘ï¸ æ¸…ç©ºå†å²
                </button>
                <span class="history-count" id="historyCount">0 æ¡è®°å½•</span>
            </div>
            
            <div class="history-list" id="historyList">
                <div class="empty-history">
                    <p>ğŸ¨ è¿˜æ²¡æœ‰ç”Ÿæˆè®°å½•</p>
                    <small>å¼€å§‹åˆ›ä½œå§ï¼</small>
                </div>
            </div>
        </aside>

        <!-- ä¸»å®¹å™¨ -->
        <div class="main-container">
            <header>
                <div class="header-content">
                    <button class="sidebar-toggle mobile-toggle" id="mobileToggle" onclick="toggleSidebar()">ğŸ“œ</button>
                    <div class="title-section">
                        <h1>ğŸŒ Nano Banana</h1>
                        <p>åŸºäº Gemini 2.5 Flash Image çš„åŒå›¾åˆæˆå·¥å…·</p>
                        <small class="paste-hint">ğŸ’¡ æ”¯æŒå•å›¾/å¤šå›¾æ¨¡å¼ï¼Œä¸”å¯ç”¨ Ctrl+V ç²˜è´´å›¾ç‰‡</small>
                    </div>
                    <button class="sidebar-toggle desktop-toggle" id="desktopToggle" onclick="toggleSidebar()">
                        ğŸ“œ å†å²è®°å½•
                    </button>
                </div>
            </header>

            <main>
            <!-- å›¾ç‰‡ä¸Šä¼ åŒºåŸŸ -->
            <section class="upload-section">
                <div class="multi-upload-container">
                    <!-- å›¾ç‰‡é¢„è§ˆç½‘æ ¼ -->
                    <div class="image-preview-grid" id="imagePreviewGrid">
                        <!-- åŠ¨æ€æ’å…¥çš„å›¾ç‰‡å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
                    </div>

                    <!-- ä¸Šä¼ æŒ‰é’®åŒºåŸŸ -->
                    <div class="upload-controls">
                        <input type="file" id="multiImageInput" accept="image/*" multiple hidden>
                        <button class="upload-btn" onclick="document.getElementById('multiImageInput').click()">
                            â• æ·»åŠ å›¾ç‰‡ (æœ€å¤š5å¼ )
                        </button>
                        <button class="clear-btn" id="clearAllImagesBtn" onclick="clearAllImages()" style="display: none;">
                            ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰
                        </button>
                    </div>
                    <p class="upload-hint">å·²é€‰æ‹©: <span id="imageCount">0</span>/5 å¼ </p>
                </div>
            </section>

            <!-- APIé…ç½®åŒºåŸŸ -->
            <section class="config-section">
                <h3>ğŸ”§ APIé…ç½®</h3>
                <div class="config-container">
                    <div class="config-row">
                        <label for="apiBaseUrl">APIåŸŸå:</label>
                        <input type="text" id="apiBaseUrl" placeholder="https://api.linkapi.org" class="config-input">
                    </div>
                    
                    <div class="config-row">
                        <label for="apiKey">API Key:</label>
                        <input type="password" id="apiKey" placeholder="è¾“å…¥Gemini API Key" class="config-input">
                    </div>
                    
                    <div class="config-row">
                        <label for="modelSelect">æ¨¡å‹:</label>
                        <select id="modelSelect" class="config-select">
                            <option value="nano-banana-2-4k">nano-banana-2-4k</option>
                            <option value="gemini-2.5-flash-image-preview">gemini-2.5-flash-image-preview</option>
                            <option value="gemini-2.0-flash">gemini-2.0-flash</option>
                        </select>
                        <button id="refreshModelsBtn" class="refresh-btn" onclick="refreshModels()">ğŸ”„ åˆ·æ–°</button>
                    </div>
                </div>
            </section>

            <!-- Promptè¾“å…¥åŒºåŸŸ -->
            <section class="prompt-section">
                <h3>âœï¸ æç¤ºè¯</h3>
                <textarea id="promptInput" placeholder="è¾“å…¥åˆæˆæŒ‡ä»¤ï¼Œä¾‹å¦‚ï¼šå°†å·¦å›¾çš„å›¾æ¡ˆåº”ç”¨åˆ°å³å›¾çš„è¡£æœä¸Šï¼Œä¿æŒäººç‰©ä¸å˜..." 
                         class="prompt-textarea"></textarea>
            </section>

            <!-- ç”ŸæˆæŒ‰é’® -->
            <section class="generate-section">
                <button id="generateBtn" class="generate-btn" onclick="generateImage()" disabled>
                    ğŸš€ å¼€å§‹ç”Ÿæˆ
                </button>
            </section>

            <!-- è¿›åº¦æ˜¾ç¤ºåŒºåŸŸ -->
            <section class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <p class="progress-text" id="progressText">å‡†å¤‡ä¸­...</p>
                </div>
            </section>

            <!-- ç»“æœæ˜¾ç¤ºåŒºåŸŸ -->
            <section class="result-section" id="resultSection" style="display: none;">
                <h3>ğŸ¨ ç”Ÿæˆç»“æœ</h3>
                <div id="chatStream" class="chat-stream">
                    <!-- å¯¹è¯æ°”æ³¡å’Œå›¾ç‰‡ç»“æœå°†åŠ¨æ€è¿½åŠ åˆ°è¿™é‡Œ -->
                </div>
            </section>
            </main>

            <footer>
                <p>Powered by Gemini 2.5 Flash Image API</p>
            </footer>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="api.js"></script>
    <script src="script.js"></script>
</body>
</html>

